# Control structures


```{block2, type = 'rmdtip'}

In this lesson you will get to know control structures as a significant structural element of code. Control structures allow our code to adapt its behavior depending on the value of the current variables in the environment. 

We distinguish between two types of control structures:

1) **Conditional statements** which allow to execute instructions only if a certain condition is satisfied.

2) **Loops** which allow to repeat one or more instructions multiple times. Loops are commonly used to apply the same operation on a series of values that are stored in sequences such as vectors or lists.

```

## If

The most fundamental conditional statement in R is the structure 'if', which is used to execute one or more instructions only if a certain condition is is TRUE.

In order to include an if-structure in your code, you need to use the following syntax:

```{r, echo=TRUE}
a_value <- -7
if (a_value < 0) cat("Negative")
```

The **statement** 'cat("Negative")' gets executed and the text "negative" is printed out, because the **condition** (a_value < 0) is TRUE.   

```{block2, type = 'rmdtip'}

The function [cat()](https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cat){target="_blank"} concatenates and prints string inputs ("Negative" in the example above). Alternatively, you can use the function 'print()' to write variable values to the console window. 

These functions are highly useful to inspect whether variables take on expected values!

```

Note that every conditional statement (e.g. 'a_value < 0') returns a logical value that is either TRUE or FALSE. 

```{block2, type = 'rmdexercise'}

Remove the negative sign from the conditional statement in the code above. 

<details closed>
<summary><ins>**See solution!**</ins></summary>
<p><i><font color="grey">
  
The condition yields FALSE. The statement does not get executed. 
    
</font></i>
</p>
</details>  

```

## Else

In many cases we want the interpreter to do something if the condition is satisfied or do something *else*, if the condition is not satisfied.

Format: **if** (*condition*) *statement1* **else** *statement2*

- *condition*: expression returning a logic value (`TRUE` or `FALSE`)
- *statement1* and *statement2*: any valid R statements
- *statement1*  executed if *condition* is `TRUE`
- *statement2*  executed if *condition* is `FALSE`


```{r, echo=TRUE}
a_value <- -7
if (a_value < 0) cat("Negative") else cat("Positive")
a_value <- 8
if (a_value < 0) cat("Negative") else cat("Positive")
```

<!--
## Example
```{r, echo=TRUE}
x <- 10
if (is.numeric(x) & (!(x < 0) & (x != 0)) ) cat("greater than zero")
```
-->


## Code blocks

**Code blocks** allow to encapsulate **several** statements in a single group

- `{` and `}` contain code blocks
- the statements are execute together

```{r, echo=TRUE}
first_value <- 8
second_value <- 5
if (first_value > second_value) {
  cat("First is greater than second\n") 
  difference <- first_value - second_value
  cat("Their difference is ", difference)
}
```



## Loops
Loops are a fundamental component of (procedural) programming.


There are two main types of loops:

- **conditional** loops are executed as long as a defined condition holds true
    - construct `while`
    - construct `repeat`
- **deterministic** loops are executed a pre-determined number of times
    - construct `for`


## While

The *while* construct can be defined using the `while` reserved word, followed by the conditional statement between simple brackets, and a code block. The instructions in the code block are re-executed as long as the result of the evaluation of the conditional statement is `TRUE`.

```{r, echo=TRUE}
current_value <- 0
while (current_value < 3) {
  cat("Current value is", current_value, "\n")
  current_value <- current_value + 1
}
```

<!--
## Repeat
The *repeat* construct can be defined using the `repeat` reserved word, followed by a code block. The instructions in the code block are re-executed until the command `break` is given. The latter is currently given through an `if` construct, which tests the condition that would stop the loop.
```{r, echo=TRUE}
current_value <- 0
repeat {
  cat("Current value is", current_value, "\n")
  current_value <- current_value + 1
  if (current_value >= 3) break
}
```
## While vs Repeat
The difference between `while` and `repeat` is mostly syntactical.
- Sometimes one or the other might fit better with the algorithm you have in mind
- Use the one that comes easier to you in the given situation
-->

## For

The *for* construct can be defined using the `for` reserved word, followed by the definition of an **iterator**. The iterator is a variable which is temporarily assigned with the current element of a vector, as the construct iterates through all elements of the vector. This definition is followed by a code block, whose instructions are re-executed once for each element of the vector.

```{r, echo=TRUE}
cities <- c("Derby", "Leicester", "Lincoln", "Nottingham")
for (city in cities) {
  cat("Do you live in", city, "?\n")
}
```


## For

It is common practice to create a vector of integers on the spot in order to execute a certain sequence of steps a pre-defined number of times.

```{r, echo=TRUE}
for (i in 1:3) {
  cat("This is exectuion number", i, ":\n")
  cat("    See you later!\n")
}
```


## Loops with conditional statements

```{r, echo=TRUE}
3:0
#Example: countdown!
for (i in 3:0) {
  if (i == 0) {
    cat("Go!\n")
  } else {
    cat(i, "\n")
  }
}
```



## Summary

Control structures

- Conditional statements
- Loops

**Next**: Functions

- Defining functions
- Scope of a variable

